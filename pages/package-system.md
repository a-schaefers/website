---
title: Package System
category: main
---

The package system that KISS employs is a new concept that came to me (*Dylan Araps*) in a dream one night. The concept is simple; a set of plain text files separated by lines and spaces. Easily parseable in any programming language or with standard tools.


## Index

<!-- vim-markdown-toc GFM -->

* [The structure](#the-structure)
* [Installation](#installation)
* [Build](#build)
* [Dependencies](#dependencies)
* [Sources](#sources)
* [Version](#version)

<!-- vim-markdown-toc -->


## The structure

```sh
zlib/            # Package name.
├─ build         # Build script.
├─ depends       # Dependencies (one per line) (sometimes optional).
├─ sources       # Sources (one per line).
├─ version       # Package version.
┘

# Files generated by the package manager.
├─ checksums     # The checksums for the source files.
┘

# Optional files.
├─ post_install  # Script to run after package installation.
├─ patches/*     # Directory to store patches.
├─ files/*       # Directory to misc files.
├─ nostrip       # Don't strip binaries for this package (empty file).
┘
```

## Installation

When a package is installed, this entire directory tree is copied to `/var/db/kiss` where it becomes a database entry. Listing the dependencies for a package is a simple as printing the contents of the `depends` file. Searching for which package owns a file is as simple as checking each `manifest` file.

## Build

The `build` file should contain all of the steps required to patch, configure, build and install the package.

The current directory of the script is the source directory of the package, there is no need to `cd` anywhere. The script is passed a single argument which points to the directory the package should be installed to (`make DESTDIR="$1" install`).

**Simple example**:

```
#!/bin/sh -e

./configure \
    --prefix=/usr \
    --sysconfdir=/etc

make
make DESTDIR="$1" install
```

## Dependencies
## Sources
## Version
